### Python中Set的定义

**集合（Set）**是Python中一种用于存储多个无序且唯一元素的可变集合类型。集合使用大括号 `{}` 括起来，元素之间使用逗号 `,` 分隔。注意，创建空集合时不能使用 `{}`，因为那会被认为是空字典，应使用 `set()` 来创建。例如：

```python
创建一个空集合
set1 = set()

创建一个包含整数的集合
set2 = {1, 2, 3, 4, 5}

创建一个包含不同类型元素的集合（元素必须是不可变的）
set3 = {1, "Hello", 3.14, True}

创建一个嵌套集合（集合中包含集合）——使用 frozenset 使内部集合不可变
set4 = {1, frozenset({2, 3}), frozenset({"a", "b"})}

创建只包含一个元素的集合
set5 = {1}
```

**集合的特点：**

1. **无序性（Unordered）：** 集合中的元素没有固定顺序，因此无法通过索引访问，也不保证存储顺序。

2. **可变性（Mutable）：** 集合允许动态添加和删除元素，但集合中的元素必须是唯一且不可变的。

3. **支持多种数据类型（Heterogeneous Elements）：** 集合可以包含不同数据类型的元素，但要求每个元素是可哈希的。

4. **支持集合操作（Set Operations）：** 提供并集、交集、差集、对称差等操作。例如：
    ```python
    s1 = {1, 2, 3}
    s2 = {3, 4, 5}
    union_set = s1 | s2          并集
    intersection_set = s1 & s2   交集
    difference_set = s1 - s2     差集
    ```

5. **可迭代（Iterable）：** 可以使用循环遍历集合中的元素，但遍历顺序是不固定的。

6. **不支持索引（Unindexed）：** 由于集合是无序的，因此无法通过索引访问单个元素。

7. **高效的成员检测（Efficient Membership Testing）：** 利用哈希表实现，检查元素是否存在非常高效。

> 集合與列表、元組的區別：集合是無序且唯一的資料結構，適合快速檢查元素是否存在；列表是有序且可變的，而元組是有序且不可變的。

### 集合的创建

在Python中，有多种方法可以生成集合（Set）。以下是一些常见的创建集合的方法：

1. **使用大括号直接创建集合**
2. **使用 `set()` 函数将其他可迭代对象转换为集合**
3. **使用集合推导式（Set Comprehension）**
4. **使用 `add()` 方法逐个添加元素**
5. **使用 `update()` 方法添加多个元素**
6. **使用 `frozenset()` 创建不可变集合**
7. **使用 `set()` 函数从字符串创建集合**
8. **从已有集合复制（浅拷贝）**
9. **使用集合运算创建新集合（如并集、交集等）**
10. **使用嵌套集合创建复杂数据结构（需配合frozenset）**

```python
# 方法1：使用大括号直接创建集合
my_set1 = {1, 2, 3, 4, 5}
print(my_set1)  # 结果为{1, 2, 3, 4, 5}

# 方法2：使用set()函数将其他可迭代对象转换为集合
my_set2 = set((6, 7, 8, 9, 10))  # 将元组转换为集合
print(my_set2)  # 结果为{6, 7, 8, 9, 10}

# 方法3：使用集合推导式（Set Comprehension）
my_set3 = {x * 2 for x in range(1, 6)}  # 生成1到5的数字并乘以2
print(my_set3)  # 结果为{2, 4, 6, 8, 10}

# 方法4：使用add()方法逐个添加元素
my_set4 = set()
my_set4.add('a')
my_set4.add('b')
my_set4.add('c')
print(my_set4)  # 结果为{'a', 'b', 'c'}

# 方法5：使用update()方法添加多个元素
my_set5 = {1, 2}
my_set5.update([3, 4, 5])
print(my_set5)  # 结果为{1, 2, 3, 4, 5}

# 方法6：使用frozenset()创建不可变集合
my_set6 = frozenset([1, 2, 3])
print(my_set6)  # 结果为frozenset({1, 2, 3})

# 方法7：使用set()函数从字符串创建集合
my_set7 = set('Python')  # 将字符串转换为集合
print(my_set7)  # 结果为{'P', 'y', 't', 'h', 'o', 'n'}

# 方法8：从已有集合复制（浅拷贝）
original_set = {1, 2, 3}
my_set8 = original_set.copy()
print(my_set8)  # 结果为{1, 2, 3}

# 方法9：使用集合运算创建新集合
set_a = {1, 2, 3}
set_b = {3, 4, 5}
my_set9 = set_a | set_b  # 并集
print(my_set9)  # 结果为{1, 2, 3, 4, 5}

# 方法10：使用嵌套集合创建复杂数据结构
my_set10 = {frozenset({1, 2}), frozenset({3, 4})}
print(my_set10)  # 结果为{frozenset({1, 2}), frozenset({3, 4})}
```

### 集合的索引和切片

集合（Set）是一个无序的、不重复的元素集合。由于其无序性，集合**不支持**索引和切片操作。这是集合与列表、元组等序列类型的一个重要区别。

#### **为什么集合不支持索引和切片？**

1. **无序性**
   - 集合中的元素没有固定的顺序
   - 每次打印或遍历集合时，元素的顺序可能都不相同
   
2. **唯一性**
   - 集合中的元素都是唯一的
   - 不允许重复元素存在

### 集合元素的更新、增加和删除

在Python中，**集合（Set）**是一种**可变（Mutable）**的数据类型，这意味着我们可以修改其内容，包括添加和删除元素。由于集合的无序性，不能像列表那样直接更新指定位置的元素。

#### 添加元素到集合的方法

向集合中添加新元素的方法有：

1. **使用 `add()` 方法添加单个元素**
2. **使用 `update()` 方法添加多个元素**

#### 删除集合中的元素的方法

从集合中删除元素的方法有：

1. **使用 `remove()` 方法 - 删除指定元素，如果元素不存在则报错**
2. **使用 `discard()` 方法 - 删除指定元素，如果元素不存在则不报错**
3. **使用 `pop()` 方法 - 随机删除并返回一个元素**
4. **使用 `clear()` 方法 - 清空集合中的所有元素**

```python
# 创建一个初始集合
my_set = {1, 2, 3, 4, 5}
print("初始集合:", my_set)

# 一、添加元素到集合

# 1. 使用 add() 方法添加单个元素
my_set.add(6)
print("添加单个元素 (add):", my_set)  # 输出: {1, 2, 3, 4, 5, 6}

# 2. 使用 update() 方法添加多个元素
my_set.update([7, 8, 9])
print("添加多个元素 (update):", my_set)  # 输出: {1, 2, 3, 4, 5, 6, 7, 8, 9}

print("-" * 50)

# 二、删除集合中的元素

# 1. 使用 remove() 方法删除指定元素
my_set.remove(9)
print("删除元素 (remove):", my_set)  # 输出: {1, 2, 3, 4, 5, 6, 7, 8}

# 2. 使用 discard() 方法删除元素
my_set.discard(8)
print("删除元素 (discard):", my_set)  # 输出: {1, 2, 3, 4, 5, 6, 7}

# 3. 使用 pop() 方法随机删除一个元素
popped_element = my_set.pop()
print("随机删除元素 (pop):", my_set)
print("被删除的元素:", popped_element)

# 4. 使用 clear() 方法清空集合
my_set.clear()
print("清空集合 (clear):", my_set)  # 输出: set()

```

### 集合的運算

Python中的集合提供了多種集合運算操作:

1. **交集(Intersection)**
   - 使用 `intersection()` 方法或 `&` 運算符
   - 返回兩個集合中都包含的元素
   - 例如: `{1,2,3} & {2,3,4}` 返回 `{2,3}`

2. **並集(Union)**
   - 使用 `union()` 方法或 `|` 運算符
   - 返回兩個集合中所有不重複的元素
   - 例如: `{1,2,3} | {2,3,4}` 返回 `{1,2,3,4}`

3. **差集(Difference)**
   - 使用 `difference()` 方法或 `-` 運算符
   - 返回第一個集合中有而第二個集合中沒有的元素
   - 例如: `{1,2,3} - {2,3,4}` 返回 `{1}`

4. **對稱差集(Symmetric Difference)**
   - 使用 `symmetric_difference()` 方法或 `^` 運算符
   - 返回兩個集合中不重複的元素
   - 例如: `{1,2,3} ^ {2,3,4}` 返回 `{1,4}`
#
5. **成員運算(Membership)**
   - 使用 `in` 運算符檢查元素是否在集合中
   - 使用 `not in` 運算符檢查元素是否不在集合中
   - 例如: 
     - `2 in {1,2,3}` 返回 `True`
     - `4 not in {1,2,3}` 返回 `True`

### 不可變集合 (Frozen Set)

Frozen Set 是 Python 中的不可變集合類型，具有以下特點：
1. **不可變性**
   - 創建後不能添加或刪除元素
   - 不能修改其中的元素
   - 可以作為字典的鍵使用
2. **創建方式**
   - 使用 `frozenset()` 函數
   - 例如: `frozenset([1, 2, 3])`
3. **支持的操作**
   - 支持所有不修改集合的操作（如交集、並集等）
   - 不支持修改集合的操作（如 add、remove 等）
4. **使用場景**
   - 需要不可變集合時
   - 作為字典的鍵
   - 需要長期保持不變的集合數據
5. **示例**
   ```python
   fs = frozenset([1, 2, 3])
   fs.add(4)  這會報錯
   fs.remove(1)  這也會報錯
   ```

> Frozen Set和元組(Tuple)雖然都是Python中的不可變序列類型，但它們有著本質的區別。元組是一個有序的序列，可以包含重複元素，並且能夠通過索引來訪問特定位置的元素。而Frozen Set作為一種特殊的集合類型，它繼承了集合的基本特性：元素是無序的且不允許重複。這裡特別說明一下關於Frozen Set中元素順序的問題 - 無論是普通集合(Set)還是Frozen Set，它們的元素都是無序的，這意味著我們不能依賴元素的存儲順序，每次打印或遍歷時元素的順序可能都不相同。正是因為這種無序性，我們不能像訪問元組那樣通過索引來訪問集合中的元素。Frozen Set的主要用途是在需要使用不可變且不重複元素集合的場景，比如作為字典的鍵或需要確保數據不被修改的情況。


### 集合类型中的常见方法

集合对象提供了多种内置方法，方便对集合数据进行操作和处理。以下是 Python 集合常用的方法（在这里，方法指的是`set.method(*paras)`）：

| 方法 | 解释 | 示例 | 输出 |
| :- | :- | :- | :- |
| **添加元素** |  |  |  |
| `set.add(x)` | 向集合添加元素 x | `{1, 2}.add(3)` | `{1, 2, 3}` |
| `set.update(iterable)` | 将可迭代对象中的元素添加到集合 | `{1, 2}.update([3, 4])` | `{1, 2, 3, 4}` |
| **删除元素** |  |  |  |
| `set.remove(x)` | 删除集合中指定元素 x，若不存在则报错 | `{1, 2, 3}.remove(2)` | `{1, 3}` |
| `set.discard(x)` | 删除集合中指定元素 x，若不存在则不报错 | `{1, 2, 3}.discard(4)` | `{1, 2, 3}` |
| `set.pop()` | 随机删除并返回一个元素 | `{1, 2, 3}.pop()` | 随机返回 1, 2 或 3 |
| `set.clear()` | 清空集合中的所有元素 | `{1, 2, 3}.clear()` | `set()` |
| **集合操作** |  |  |  |
| `set.union(*others)` | 返回集合的并集 | `{1, 2}.union({2, 3})` | `{1, 2, 3}` |
| `set.intersection(*others)` | 返回集合的交集 | `{1, 2}.intersection({2, 3})` | `{2}` |
| `set.difference(*others)` | 返回集合的差集 | `{1, 2}.difference({2, 3})` | `{1}` |
| `set.symmetric_difference(other)` | 返回集合的对称差集 | `{1, 2}.symmetric_difference({2, 3})` | `{1, 3}` |
| `set.isdisjoint(other)` | 判断两个集合是否没有交集 | `{1, 2}.isdisjoint({3, 4})` | `True` |
| `set.issubset(other)` | 判断集合是否是另一个集合的子集 | `{1, 2}.issubset({1, 2, 3})` | `True` |
| `set.issuperset(other)` | 判断集合是否是另一个集合的超集 | `{1, 2, 3}.issuperset({1, 2})` | `True` |
| **复制和修改** |  |  |  |
| `set.copy()` | 返回集合的浅拷贝 | `{1, 2}.copy()` | `{1, 2}` |
| `set.__len__()` | 返回集合的长度 | `{1, 2, 3}.__len__()` | `3` |
| `set.__contains__(x)` | 判断集合是否包含元素 x | `{1, 2, 3}.__contains__(2)` | `True` |

> 需要注意的是,上述方法中,只有不涉及修改集合的操作(如union、intersection、difference、symmetric_difference、isdisjoint、issubset、issuperset、copy、__len__、__contains__等)可以用於frozenset。而涉及修改集合的方法(如add、update、remove、discard、pop、clear等)只能用於普通set,在frozenset上使用這些方法會引發TypeError。

### 集合類型中的常見函數

以下是 Python 集合常用的函数（在这里，方法指的是`func(set)`）：

| 函数 | 解释 | 示例 | 输出 |
| :- | :- | :- | :- |
| `len(s)` | 返回集合 `s` 的长度（元素个数）。 | `len({1, 2, 3})` | `3` |
| `max(s)` | 返回集合 `s` 中最大的元素。 | `max({1, 2, 3})` | `3` |
| `min(s)` | 返回集合 `s` 中最小的元素。 | `min({1, 2, 3})` | `1` |
| `sorted(s)` | 返回集合 `s` 中元素排序后的列表。 | `sorted({3, 1, 2})` | `[1, 2, 3]` |
| `set(iterable)` | 将可迭代对象转换为集合。 | `set([1, 2, 3])` | `{1, 2, 3}` |
| `sum(s)` | 返回集合 `s` 中所有元素的和。 | `sum({1, 2, 3})` | `6` |
| `any(s)` | 如果集合 `s` 中任一元素为真则返回 True。 | `any({0, 1, 0})` | `True` |
| `all(s)` | 如果集合 `s` 中所有元素为真则返回 True。 | `all({1, 1, 0})` | `False` |
| `frozenset(s)` | 返回集合 `s` 的不可变版本。 | `frozenset({1, 2, 3})` | `frozenset({1, 2, 3})` |
| `isdisjoint(s1, s2)` | 判断两个集合是否没有交集。 | `isdisjoint({1, 2}, {3, 4})` | `True` |


